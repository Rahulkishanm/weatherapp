(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(8),r=n(2),o=(n(17),n(5)),l=n(6);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(a.useState)(!0),i=Object(r.a)(n,2),c=i[0],o=i[1],l=Object(a.useState)(),s=Object(r.a)(l,2),d=s[0],u=s[1],j=Object(a.useState)(),v=Object(r.a)(j,2),h=v[0],b=v[1],m=Object(a.useCallback)((function(){o(!0),u(void 0),b(void 0),e().then(b).catch(u).finally((function(){return o(!1)}))}),t);return Object(a.useEffect)((function(){m()}),[m]),{loading:c,error:d,value:h}}var d={headers:{"Content-Type":"application/json"}};function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return s((function(){return 0===Object.keys(t).length?fetch(e).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})):fetch(e,Object(l.a)(Object(l.a)({},d),t)).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}),n)}var j="910223db7244fe5348d517710ba36961",v=n(0),h=function(e){var t=e.setCityLatLong,n=i.a.useRef(),a=i.a.useState(""),c=Object(r.a)(a,2),l=c[0],s=c[1],d=i.a.useState(!1),j=Object(r.a)(d,2),h=j[0],b=j[1];i.a.useEffect((function(){n.current.focus()}));var m={aroundLatLngViaIP:!1,query:l,language:"en"},f=u("https://places-dsn.algolia.net/1/places/query?x-algolia-application-id=".concat("plQ0HEAREVSZ","&x-algolia-api-key=").concat("adce344ab26b5c12d2362a2f6bc7e06e"),{method:"POST",body:JSON.stringify(m)},[l]),g=f.loading,p=f.error,O=f.value,x=l.length>1&&!g,y=function(e){if((null===e||void 0===e?void 0:e.hits.length)>0){var t=null===e||void 0===e?void 0:e.hits.filter((function(e){return e.importance>10})).map((function(e){var t;return(null===e||void 0===e||null===(t=e.administrative)||void 0===t?void 0:t.length)>0?{label:e.administrative[e.administrative.length-1],lat:e._geoloc.lat,lon:e._geoloc.lng}:null})).filter((function(e){return null!==e}));return t=t.filter((function(e,t,n){return t===n.findIndex((function(t){return t.label===e.label}))}))}return[]}(O);return Object(v.jsx)("div",{className:"header",children:Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"relative"},children:[Object(v.jsx)("input",{ref:n,type:"text",name:"city",id:"city",value:l,placeholder:"Type a city here !!",onChange:function(e){s(e.target.value),b(!0)}}),Object(v.jsx)("div",{className:"city-dropdown-container",children:x&&h&&Object(o.a)(y).map((function(e,n){return Object(v.jsx)("div",{className:"city-dropdown",onClick:function(){b(!1),s(e.label),t({lat:e.lat,lon:e.lon})},children:e.label},e.label)}))}),p&&"There was a error from algolia server, please retry after sometime"]})})};var b=function(e){var t=e.icon,n=e.height,i=e.width,c=Object(a.useState)(""),o=Object(r.a)(c,2),l=o[0],s=o[1];return Object(a.useEffect)((function(){"01d"===t&&s("day.svg"),"01n"===t&&s("night.svg"),"02d"===t&&s("cloudy-day-1.svg"),"02n"===t&&s("cloudy-night-1.svg"),"03d"!==t&&"03n"!==t&&"04d"!==t&&"04n"!==t||s("cloudy.svg"),"09d"!==t&&"09n"!==t||s("rainy-6.svg"),"10d"!==t&&"10n"!==t||s("rainy-3.svg"),"11d"!==t&&"11n"!==t||s("thunder.svg"),"13d"!==t&&"13n"!==t||s("snowy-5.svg"),"50d"!==t&&"50n"!==t||s("cloudy.svg")}),[t]),Object(v.jsx)("div",{children:Object(v.jsx)("img",{src:"".concat(window.location.origin,"/assets/weather-icons/").concat(l),width:i,height:n,alt:"climate image"})})},m=function(e){var t=new Date(1e3*e),n=new Intl.DateTimeFormat("en",{year:"numeric"}).format(t),a=new Intl.DateTimeFormat("en",{month:"short"}).format(t),i=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(t);return"".concat(i," ").concat(a," ").concat(n)},f=function(e){var t=new Date(1e3*e);return("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)},g=function(e){var t=new Date(1e3*e);return new Intl.DateTimeFormat("en",{weekday:"short"}).format(t)},p=(n(19),function(e){var t=e.temp,n=void 0===t?0:t,a=e.main,i=void 0===a?"empty":a,c=e.area,r=void 0===c?"empty":c;return Object(v.jsxs)("div",{className:"cardheader",children:[Object(v.jsx)("div",{style:{alignSelf:"center"},children:"".concat(parseInt(n),"\xb0C")}),Object(v.jsx)("div",{style:{borderLeft:"1px solid white"}}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:i}),Object(v.jsx)("div",{children:r})]})]})}),O=function(e){var t=e.icon,n=void 0===t?"01d":t,a=e.day,i=void 0===a?"Mon":a,c=e.date,r=void 0===c?"21 Jan 2021":c,o=e.time,l=void 0===o?"08:43":o;return Object(v.jsxs)("div",{className:"innerContent",children:[Object(v.jsx)(b,{icon:n,height:"100px",width:"100px"}),Object(v.jsx)("div",{children:i}),Object(v.jsx)("div",{children:r}),Object(v.jsx)("div",{children:l})]})},x=function(e){var t=e.content,n=e.idx,a=t.weather[0].icon,i=f(t.dt),c=t.main.temp;return Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginRight:"5px"},children:[Object(v.jsx)("div",{children:0===n?"Now":i}),Object(v.jsx)(b,{icon:a,height:"35px",width:"35px"}),Object(v.jsx)("div",{children:"".concat(parseInt(c),"\xb0C")})]},t.name)},y=function(e){var t=e.reportList,n=(void 0===t?[]:t).map((function(e,t){return Object(v.jsx)(x,{content:e,idx:t},e.dt)}));return Object(v.jsx)("div",{className:"footer",children:n})},w=function(e){var t=e.valueTenDays,n=e.valueNow,a=n.name,i=n.weather[0],c=i.main,r=i.icon,l=n.main.temp,s=n.dt,d=t.list,u=new Date(1e3*n.sys.sunrise)>(new Date).getTime()&&(new Date).getTime()<new Date(1e3*n.sys.sunset);return Object(v.jsxs)("div",{className:"card ".concat(u?"backgroundNight":"backgroundLight"," "),children:[Object(v.jsx)(p,{temp:l,main:c,area:a}),Object(v.jsx)(O,{date:m(s),day:g(s),time:f(s),icon:r}),Object(v.jsx)(y,{reportList:[n].concat(Object(o.a)(d))})]})},N=function(e){var t=e.cityLatLong,n=t.lat,a=t.lon,i=u("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(n,"&lon=").concat(a,"&appid=").concat(j,"&units=metric"),{},[n,a]),c=u("https://api.openweathermap.org/data/2.5/weather?lat=".concat(n,"&lon=").concat(a,"&appid=").concat(j,"&units=metric"),{},[n,a]);return Object(v.jsxs)("div",{className:"weather-container",children:[!!c.value&&!!i.value&&!i.error&&!i.error&&Object(v.jsx)("div",{className:"item",children:Object(v.jsx)(w,{valueTenDays:i.value,valueNow:c.value})}),i.error||c.error&&"There was error from openweathermap API, please retry later",(i.loading||c.loading)&&Object(v.jsx)("div",{className:"item",children:Object(v.jsx)("div",{className:"card  backgroundLight",style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"1.3rem"},children:"Satellites moving..!"})})]})};function D(){var e=0,t=i.a.useState({lat:null,lon:null}),n=Object(r.a)(t,2),a=n[0],c=n[1];setInterval((function(){e+=1}),6e4);var o=null===a.lat;return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(h,{setCityLatLong:c}),!o&&Object(v.jsx)(N,{cityLatLong:a},e),o&&Object(v.jsx)("div",{className:"introTitle",children:"Welcome to World Wide Weather \u26f1\ufe0f"})]})}var L=document.getElementById("root");Object(c.createRoot)(L).render(Object(v.jsx)(a.StrictMode,{children:Object(v.jsx)(D,{})}))}},[[20,1,2]]]);
//# sourceMappingURL=main.0c7b1460.chunk.js.map